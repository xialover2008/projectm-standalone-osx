PROJECT(qprojectM-xmms)


set(QT_USE_OPENGL TRUE)
INCLUDE(${QT_USE_FILE} FindPkgConfig.cmake)

FIND_PACKAGE(OpenGL)
FIND_PACKAGE(GTK)
FIND_PACKAGE(Qt4 REQUIRED)

pkg_search_module(PROJECTM REQUIRED libprojectM)

ADD_DEFINITIONS(-DLINUX -DPROJECTM_PREFIX='"${PROJECTM_PREFIX}"')
ADD_DEFINITIONS(${QT_DEFINITIONS})
ADD_DEFINITIONS(-DQT_NO_DEBUG)

INCLUDE_DIRECTORIES(${PROJECTM_INCLUDEDIR} ${GTK_INCLUDE_DIR}  ${QT_INCLUDE_DIR}  ${QT_QTGUI_INCLUDE_DIR} ${QT_QTOPENGL_INCLUDE_DIR})
LINK_DIRECTORIES(${PROJECTM_LDFLAGS})


ADD_LIBRARY(qprojectM-xmms SHARED main.cpp ConfigFile.h ConfigFile.cpp)

TARGET_LINK_LIBRARIES(qprojectM-xmms qprojectM projectM  ${GTK_LIBRARIES} ${QT_QTGUI_LIBRARIES} ${QT_QTOPENGL_LIBRARIES} ${QT_LIBRARIES})

INSTALL(TARGETS qprojectM-xmms DESTINATION ${CMAKE_INSTALL_PREFIX}/lib/xmms/Visualization )